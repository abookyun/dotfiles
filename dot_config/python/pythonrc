# Python interactive shell startup file
# This file is executed when you run `python` interactively

import sys
import os

# Enable tab completion in interactive Python shell
try:
    import readline
    import rlcompleter
    readline.parse_and_bind("tab: complete")
except ImportError:
    pass

# Set up history file in XDG-compliant location
history_file = os.path.join(
    os.environ.get('XDG_STATE_HOME', os.path.expanduser('~/.local/state')),
    'python',
    'python_history'
)

# Create directory if it doesn't exist
os.makedirs(os.path.dirname(history_file), exist_ok=True)

# Load and save history
try:
    import readline
    if os.path.exists(history_file):
        readline.read_history_file(history_file)

    import atexit
    atexit.register(readline.write_history_file, history_file)
except (ImportError, OSError):
    pass
